import{b as e,n as l,v as a,f as t,F as s,r as o,x as u,i as n,w as d,j as r,o as i,g as p,y as c,e as m,z as f,m as g,M as v,E as V,a8 as h,ab as y,G as _,a7 as b}from"./vendor-CO9sYFt5.js";import{g as U,s as w,i as C,a as k}from"./index-BmuxSv1O.js";import{R as x}from"./RichText-CFT9yWSX.js";import{p as j}from"./plus-CnM3zOg6.js";const A={class:"split-row-module"},T={class:"split-1"},N=p("label",null,"经历名称",-1),z={class:"split-1"},E=p("label",null,"角色",-1),F={class:"split-1"},R=p("label",null,"时间",-1),G={class:"split-1",style:{"justify-content":"flex-end"}},M={class:"split-1"},$=e({__name:"FCampusExperience",setup(e){let $=0;const q=l(!1),B=U("getCampus");function D(){for(const e of B.value)if(e.title||e.name||e.content){if(e.title.trim().length<=0)return void g({message:"请先填写完表单关键信息！",offset:55,grouping:!0,type:"error"});if(e.name.trim().length<=0)return void g({message:"请先填写完表单关键信息！",offset:55,grouping:!0,type:"error"});if(e.content.trim().length<=0)return void g({message:"请先填写完表单关键信息！",offset:55,grouping:!0,type:"error"})}C.post("/campus").then((e=>{200===e.data.code?(B.value.push(e.data.data),q.value=!0):g({message:e.data.message,offset:55,grouping:!0,type:"error"})}))}function H(e,l){const a=l?e-1:e+1;k(B.value,e,a),q.value=!0;let t=[];for(let s=0;s<B.value.length;s++)q.value=!0,t.push(B.value[s].id);C.put("/campus/sort",t).then((e=>{g({message:e.data.message,offset:55,grouping:!0,type:"success"})}))}return a(B.value,(e=>{clearTimeout($),q.value?q.value=!1:$=setTimeout((function(){w("/campus",e),clearTimeout($)}),1e3)})),(e,l)=>{const a=v,U=V,w=h,k=y,$=_,I=r,J=b;return i(),t("div",null,[(i(!0),t(s,null,o(u(B),((e,l)=>(i(),t("div",A,[n(I,{class:"split-row-1"},{default:d((()=>[n(U,{span:5},{default:d((()=>[p("div",T,[N,n(a,{modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,placeholder:"请输入项目名称",clearable:""},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024),n(U,{span:4},{default:d((()=>[p("div",z,[E,n(a,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,placeholder:"请输入角色名称",clearable:""},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024),n(U,{span:8},{default:d((()=>[p("div",F,[R,n(w,{clearable:!1,modelValue:e.startAt,"onUpdate:modelValue":l=>e.startAt=l,style:{width:"130px"},type:"month",placeholder:"开始时间"},null,8,["modelValue","onUpdate:modelValue"]),c("- "),e.toNow?f("",!0):(i(),m(w,{key:0,clearable:!1,modelValue:e.endAt,"onUpdate:modelValue":l=>e.endAt=l,style:{width:"130px"},type:"month",placeholder:"结束时间"},null,8,["modelValue","onUpdate:modelValue"])),n(k,{modelValue:e.toNow,"onUpdate:modelValue":l=>e.toNow=l,label:"至今"},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024),n(U,{span:7},{default:d((()=>[p("div",G,[n($,{onClick:e=>H(l,!0),class:"el-c-button",type:"success",round:""},{default:d((()=>[c("上移")])),_:2},1032,["onClick"]),n($,{onClick:e=>H(l,!1),class:"el-c-button",type:"success",round:""},{default:d((()=>[c("下移")])),_:2},1032,["onClick"]),n($,{onClick:l=>{return a=e.id,void C.delete(`/campus?id=${a}`).then((e=>{if(200===e.data.code)for(let l=0;l<B.value.length;l++)B.value[l].id===a&&(q.value=!0,B.value.splice(l,1));else g({message:e.data.message,offset:55,grouping:!0,type:"error"})}));var a},class:"el-c-button",type:"danger",round:""},{default:d((()=>[c("删除")])),_:2},1032,["onClick"])])])),_:2},1024)])),_:2},1024),n(I,{class:"split-row-1"},{default:d((()=>[n(U,null,{default:d((()=>[p("div",M,[n(x,{modelValue:e.content,"onUpdate:modelValue":l=>e.content=l,placeholder:"描述校园经历的具体行动，内容，成果。"},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024),n(U,null,{default:d((()=>[n(J,{"border-style":"dashed",style:{"border-color":"#ffc69f"}})])),_:1})])),_:2},1024)])))),256)),n(I,null,{default:d((()=>[n(U,null,{default:d((()=>[n($,{onClick:D,type:"success",size:"large",icon:j,round:""},{default:d((()=>[c("新增一条校园经历")])),_:1})])),_:1})])),_:1})])}}});export{$ as default};
