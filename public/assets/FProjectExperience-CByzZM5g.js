import{b as e,n as l,v as a,f as t,F as o,r as s,x as u,i as n,w as d,j as r,o as i,g as c,y as p,e as m,z as f,m as g,M as v,E as V,a8 as h,ab as y,G as _,a7 as b}from"./vendor-CO9sYFt5.js";import{g as j,s as U,i as w,a as k}from"./index-BmuxSv1O.js";import{R as x}from"./RichText-CFT9yWSX.js";import{p as Y}from"./plus-CnM3zOg6.js";const C={class:"split-row-module"},M={class:"split-1"},A=c("label",null,"项目名称",-1),T={class:"split-1"},N=c("label",null,"参与角色",-1),z={class:"split-1"},E=c("label",null,"项目时间",-1),F={class:"split-1",style:{"justify-content":"flex-end"}},P={class:"split-1"},R=e({__name:"FProjectExperience",setup(e){let R=0;const G=l(!1),$=j("getProject");function q(){for(const e of $.value)if(e.title||e.name||e.content){if(e.title.trim().length<=0)return void g({message:"请先填写完表单关键信息！",offset:55,grouping:!0,type:"error"});if(e.name.trim().length<=0)return void g({message:"请先填写完表单关键信息！",offset:55,grouping:!0,type:"error"});if(e.content.trim().length<=0)return void g({message:"请先填写完表单关键信息！",offset:55,grouping:!0,type:"error"})}w.post("/project").then((e=>{200===e.data.code?($.value.push(e.data.data),G.value=!0):g({message:e.data.message,offset:55,grouping:!0,type:"error"})}))}function B(e,l){const a=l?e-1:e+1;k($.value,e,a),G.value=!0;let t=[];for(let o=0;o<$.value.length;o++)G.value=!0,t.push($.value[o].id);w.put("/project/sort",t).then((e=>{g({message:e.data.message,offset:55,grouping:!0,type:"success"})}))}return a($.value,(e=>{clearTimeout(R),G.value?G.value=!1:R=setTimeout((function(){U("/project",e),clearTimeout(R)}),1e3)})),(e,l)=>{const a=v,j=V,U=h,k=y,R=_,D=r,H=b;return i(),t("div",null,[(i(!0),t(o,null,s(u($),((e,l)=>(i(),t("div",C,[n(D,{class:"split-row-1"},{default:d((()=>[n(j,{span:6},{default:d((()=>[c("div",M,[A,n(a,{modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,placeholder:"请输入项目名称",clearable:""},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024),n(j,{span:5},{default:d((()=>[c("div",T,[N,n(a,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,placeholder:"请输入角色名称",clearable:""},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024),n(j,{span:8},{default:d((()=>[c("div",z,[E,n(U,{clearable:!1,modelValue:e.startAt,"onUpdate:modelValue":l=>e.startAt=l,"value-format":"YYYY-MM",style:{width:"130px"},type:"month",placeholder:"开始时间"},null,8,["modelValue","onUpdate:modelValue"]),p("- "),e.toNow?f("",!0):(i(),m(U,{key:0,clearable:!1,modelValue:e.endAt,"onUpdate:modelValue":l=>e.endAt=l,"value-format":"YYYY-MM",style:{width:"130px"},type:"month",placeholder:"结束时间"},null,8,["modelValue","onUpdate:modelValue"])),n(k,{modelValue:e.toNow,"onUpdate:modelValue":l=>e.toNow=l,label:"至今"},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024),n(j,{span:5},{default:d((()=>[c("div",F,[n(R,{onClick:e=>B(l,!0),class:"el-c-button",type:"success",round:""},{default:d((()=>[p("上移")])),_:2},1032,["onClick"]),n(R,{onClick:e=>B(l,!1),class:"el-c-button",type:"success",round:""},{default:d((()=>[p("下移")])),_:2},1032,["onClick"]),n(R,{onClick:l=>{return a=e.id,void w.delete(`/project?id=${a}`).then((e=>{if(200===e.data.code)for(let l=0;l<$.value.length;l++)$.value[l].id===a&&(G.value=!0,$.value.splice(l,1));else g({message:e.data.message,offset:55,grouping:!0,type:"error"})}));var a},class:"el-c-button",type:"danger",round:""},{default:d((()=>[p("删除")])),_:2},1032,["onClick"])])])),_:2},1024)])),_:2},1024),n(D,{class:"split-row-1"},{default:d((()=>[n(j,null,{default:d((()=>[c("div",P,[n(x,{modelValue:e.content,"onUpdate:modelValue":l=>e.content=l,placeholder:"请输入项目内容、成果和感悟，简洁突出重点。"},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024),n(j,null,{default:d((()=>[n(H,{"border-style":"dashed",style:{"border-color":"#ffc69f"}})])),_:1})])),_:2},1024)])))),256)),n(D,null,{default:d((()=>[n(j,null,{default:d((()=>[n(R,{onClick:q,type:"success",size:"large",icon:Y,round:""},{default:d((()=>[p("新增一条项目经验")])),_:1})])),_:1})])),_:1})])}}});export{R as default};
